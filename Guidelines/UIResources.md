# XML/リソース

1.  リソース定義は共通化する

    色、サイズ等の定数値はXML内に直接書かないこと。
    少なくとも、以下のように定義する。  

    * 色：`R.color` で定義
    * サイズ：`R.dimen` で定義
    * 文字列：`R.string` で定義
    * 整数値：`R.integer` で定義

    さらに、レイアウト定義内に複数の設定の組合せが何度も使われる場合は
    R.style も活用する。  
    レイアウト定義が共通化できる場合はincludeタグを活用する。

1.  サイズの単位には「dp」を使う

    Android端末は画面サイズやピクセル密度がバラバラなため、
    単位には「px」ではなく「dp」を使うこと。
    ただし、デザイン上、dpiに依存せず細い線を描きたい場合に
    1pxなどと指定するのは可。

1.  文字サイズには単位「sp」を使う

    Androidアプリの文字サイズには「sp」を使うことが推奨される。  
    レイアウト上、部品の高さ等と比率を厳密に合わせなければならない場合等を
    除いて「dp」でなく「sp」を使う。

1.  一般的な文字サイズ大中小の指定には android:textApperarance を使う

    Androidで用意されたテーマで定義される文字サイズに合わせるには、
    `android:textSize`に単位「sp」でサイズを指定するのではなく
    `android:textAppearance`を使う。

    例:

    ```xml
    <!-- 大きい文字を使う -->
    <TextView
        android:textAppearance="?android:attr/textAppearanceLarge"
    ```

1.  余白を統一する

    ある箇所では 20dp、ある箇所では 16dp、といったようなバラバラの数値を
    書かないこと。  
    少なくとも `R.dimen` として定義し、可能であればテーマとして定義する。

1.  高さは 48dp を基準にする

    [Android Design](http://developer.android.com/design/style/metrics-grids.html)
    で定義されるように、ActionBar等の様々な部品の高さを 48dp にすることが
    推奨されている(あるいは部品間の余白として上下4dpずつのpaddingを入れて
    4 + 40 + 4 = 48dp)。  
    端末内にインストールされる他のアプリとの統一感を出すためにも、
    特に指定のない場合はこの高さを設定すること。

1.  余白・間隔は 4dp / 8dp / 16dp / 32dp …を使う

    [Android Design](http://developer.android.com/design/style/metrics-grids.html)
    で定義されるように、余白や部品の間隔等には 4dp / 8dp / 16dp / 32dp
    という大きさを統一して使うこと。

1.  単位なしの数値をdpi別に定義する

    TextViewのshadowの幅、位置はdpiに応じて変更する。
    `android:shadowRadius`, `android:shadowDx`, `android:shadowDy`では
    単位がないため、`R.dimen`でdpi別に定義してコードから読み込んで
    適用するのが良い。

1.  不要なIDを付けない

    `RelativeLayout`で周囲の部品から参照されたり、
    ソースコードからアクセスしたりする必要がある場合にのみ、
    `android:id`でIDを付与する。  
    そうでない場合は、むやみにidを定義しない。

    理由:

    * XMLコードをなるべく簡潔にするため。
    * 一度R.javaに定義されるとソースコード上から利用できるようになってしまい、
      意味のない補完候補に出てしまったり誤って使ってしまいクラッシュしたりと
      悪影響を及ぼすため。

1.  文字列をstrings.xmlに集約する

    文字列はすべて`res/values/strings.xml`に集約する。  
    ファイル名はstringsでなくても用途に応じて分けて良い。
    また、パラメータ名等、ロケールによって変動する可能性がなくXMLから
    参照する可能性もない文字列はクラス内に直接定義しても良い
    (ただし定数化すること)。

1.  日本語文字列内における全角・半角に注意する

    統一感を出すため、括弧等の記号について全角文字、半角文字のどちらかに統一する。

1.  簡単な図形・画像はXMLで表現する

    グラデーションの表現にはXMLを活用しているか。
    むやみに画像を増やすとアプリサイズの増加に繋がるので
    XMLのshapeによる表現やNine-patchを活用する。

1.  角丸(shape)の領域は小さくする

    上部だけ角丸＋長方形＋下部だけ角丸、のように複数領域に分割するなどして、
    角丸領域を小さくするようにする。  
    Androidバージョンによっては、以下の様なメッセージがログ出力され、
    角丸が正常に描画できないことがある。

    > Shape round rect too large to be rendered into a texture
    > (424x5884, max=2048x2048)

1.  スクロールできるようにしておく

    Landscapeで表示した場合や、画面が小さい端末を考慮して、
    大抵の場合は`ScrollView`や`ListView`を使って
    スクロールできるようにしておく。  

    理由:

    * ボタンなど次のアクションを起こすのに必要なコントロールに触ることができない
      可能性があるため。

1.  背景色と文字色はセットで設定する

    OSバージョンやメーカーカスタマイズにより、
    (特にダイアログ等の)背景色が意図したものと異なり
    文字が非常に見にくくなる場合がある。  
    デフォルトから変更する場合は、2つをセットで変更するようにする。

1.  TableLayoutを使わない

    表形式のレイアウトを作るのに適してはいるものの、
    paddingを設定するとレイアウトが崩れる(`TableRow`の要素が右へずれる)。  
    可能であれば、`LinearLayout`や`RelativeLayout`を組み合わせて表現する。
